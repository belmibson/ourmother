Detector={canvas:!!window.CanvasRenderingContext2D,webgl:function(){try{return!!window.WebGLRenderingContext&&!!document.createElement("canvas").getContext("experimental-webgl")}catch(a){return!1}}(),workers:!!window.Worker,fileapi:window.File&&window.FileReader&&window.FileList&&window.Blob,getWebGLErrorMessage:function(){var a=document.createElement("div");a.id="webgl-error-message";a.style.fontFamily="monospace";a.style.fontSize="13px";a.style.fontWeight="normal";a.style.textAlign="center";a.style.background=
"#fff";a.style.color="#000";a.style.padding="1.5em";a.style.width="400px";a.style.margin="5em auto 0";this.webgl||(a.innerHTML=window.WebGLRenderingContext?'Your graphics card does not seem to support <a href="http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation" style="color:#000">WebGL</a>.<br />\nFind out how to get it <a href="http://get.webgl.org/" style="color:#000">here</a>.':'Your browser does not seem to support <a href="http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation" style="color:#000">WebGL</a>.<br/>\nFind out how to get it <a href="http://get.webgl.org/" style="color:#000">here</a>.');
return a},addGetWebGLMessage:function(a){var d,f;a=a||{};d=void 0!==a.parent?a.parent:document.body;a=void 0!==a.id?a.id:"oldie";f=Detector.getWebGLErrorMessage();f.id=a;d.appendChild(f)}};
THREE.OrbitControls=function(a,d){function f(){return 2*Math.PI/60/60*c.autoRotateSpeed}function p(b){g=e.ROTATE;!1!==c.enabled&&(b.preventDefault(),g===e.ROTATE?(q.set(b.clientX,b.clientY),r.subVectors(q,s),c.rotateLeft(2*Math.PI*r.x/v*c.userRotateSpeed),c.rotateUp(2*Math.PI*r.y/v*c.userRotateSpeed),s.copy(q)):g===e.ZOOM?(t.set(b.clientX,b.clientY),w.subVectors(t,u),0<w.y?c.zoomIn():c.zoomOut(),u.copy(t)):g===e.PAN&&c.pan(new THREE.Vector3(-(b.movementX||b.mozMovementX||b.webkitMovementX||0),b.movementY||
b.mozMovementY||b.webkitMovementY||0,0)))}function m(b){!1!==c.enabled&&!1!==c.userRotate&&(g=e.NONE)}function n(b){if(!1!==c.enabled&&!1!==c.userZoom){var a=0;b.wheelDelta?a=b.wheelDelta:b.detail&&(a=-b.detail);0<a?c.zoomOut():c.zoomIn()}}this.object=a;this.domElement=void 0!==d?d:document;this.enabled=!0;this.center=new THREE.Vector3;this.userZoom=!0;this.userZoomSpeed=1;this.userRotate=!0;this.userRotateSpeed=1;this.userPan=!0;this.userPanSpeed=2;this.autoRotate=!1;this.autoRotateSpeed=2;this.minPolarAngle=
0;this.maxPolarAngle=Math.PI;this.minDistance=0;this.maxDistance=Infinity;this.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40,ROTATE:65,ZOOM:83,PAN:68};var c=this,v=1800,s=new THREE.Vector2,q=new THREE.Vector2,r=new THREE.Vector2,u=new THREE.Vector2,t=new THREE.Vector2,w=new THREE.Vector2,h=0,k=0,l=1,x=new THREE.Vector3,e={NONE:-1,ROTATE:0,ZOOM:1,PAN:2},g=e.NONE,y={type:"change"};this.rotateLeft=function(b){void 0===b&&(b=f());k-=b};this.rotateRight=function(b){void 0===b&&(b=f());k+=b};this.rotateUp=function(b){void 0===
b&&(b=f());h-=b};this.rotateDown=function(b){void 0===b&&(b=f());h+=b};this.zoomIn=function(b){void 0===b&&(b=Math.pow(0.95,c.userZoomSpeed));l/=b};this.zoomOut=function(b){void 0===b&&(b=Math.pow(0.95,c.userZoomSpeed));l*=b};this.pan=function(b){b.transformDirection(this.object.matrix);b.multiplyScalar(c.userPanSpeed);this.object.position.add(b);this.center.add(b)};this.update=function(){var b=this.object.position,a=b.clone().sub(this.center),c=Math.atan2(a.x,a.z),d=Math.atan2(Math.sqrt(a.x*a.x+
a.z*a.z),a.y);this.autoRotate&&this.rotateLeft(f());var c=c+k,d=d+h,d=Math.max(this.minPolarAngle,Math.min(this.maxPolarAngle,d)),d=Math.max(1E-6,Math.min(Math.PI-1E-6,d)),e=a.length()*l,e=Math.max(this.minDistance,Math.min(this.maxDistance,e));a.x=e*Math.sin(d)*Math.sin(c);a.y=e*Math.cos(d);a.z=e*Math.sin(d)*Math.cos(c);b.copy(this.center).add(a);this.object.lookAt(this.center);h=k=0;l=1;0<x.distanceTo(this.object.position)&&(this.dispatchEvent(y),x.copy(this.object.position))};this.domElement.addEventListener("contextmenu",
function(a){a.preventDefault()},!1);this.domElement.addEventListener("mousedown",function(a){!1!==c.enabled&&!1!==c.userRotate&&(a.preventDefault(),g===e.NONE&&(0===a.button&&(g=e.ROTATE),1===a.button&&(g=e.ZOOM),2===a.button&&(g=e.PAN)),g===e.ROTATE?s.set(a.clientX,a.clientY):g===e.ZOOM&&u.set(a.clientX,a.clientY),document.addEventListener("mousemove",p,!1),document.addEventListener("mouseup",m,!1))},!1);this.domElement.addEventListener("mousewheel",n,!1);this.domElement.addEventListener("DOMMouseScroll",
n,!1);window.addEventListener("keydown",function(a){if(!1!==c.enabled&&!1!==c.userPan)switch(a.keyCode){case c.keys.ROTATE:g=e.ROTATE;break;case c.keys.ZOOM:g=e.ZOOM;break;case c.keys.PAN:g=e.PAN}},!1);window.addEventListener("keyup",function(a){switch(a.keyCode){case c.keys.ROTATE:case c.keys.ZOOM:case c.keys.PAN:g=e.NONE}},!1)};THREE.OrbitControls.prototype=Object.create(THREE.EventDispatcher.prototype);var THREEx=THREEx||{};
THREEx.KeyboardState=function(){this.keyCodes={};this.modifiers={};var a=this;this._onKeyDown=function(d){a._onKeyChange(d,!0)};this._onKeyUp=function(d){a._onKeyChange(d,!1)};document.addEventListener("keydown",this._onKeyDown,!1);document.addEventListener("keyup",this._onKeyUp,!1)};THREEx.KeyboardState.prototype.destroy=function(){document.removeEventListener("keydown",this._onKeyDown,!1);document.removeEventListener("keyup",this._onKeyUp,!1)};
THREEx.KeyboardState.MODIFIERS=["shift","ctrl","alt","meta"];THREEx.KeyboardState.ALIAS={left:37,up:38,right:39,down:40,space:32,pageup:33,pagedown:34,tab:9};THREEx.KeyboardState.prototype._onKeyChange=function(a,d){this.keyCodes[a.keyCode]=d;this.modifiers.shift=a.shiftKey;this.modifiers.ctrl=a.ctrlKey;this.modifiers.alt=a.altKey;this.modifiers.meta=a.metaKey};
THREEx.KeyboardState.prototype.pressed=function(a){a=a.split("+");for(var d=0;d<a.length;d++){var f=a[d];if(!(-1!==THREEx.KeyboardState.MODIFIERS.indexOf(f)?this.modifiers[f]:-1!=Object.keys(THREEx.KeyboardState.ALIAS).indexOf(f)?this.keyCodes[THREEx.KeyboardState.ALIAS[f]]:this.keyCodes[f.toUpperCase().charCodeAt(0)]))return!1}return!0};THREEx=THREEx||{};THREEx.FullScreen=THREEx.FullScreen||{};THREEx.FullScreen.available=function(){return this._hasWebkitFullScreen||this._hasMozFullScreen};
THREEx.FullScreen.activated=function(){if(this._hasWebkitFullScreen)return document.webkitIsFullScreen;if(this._hasMozFullScreen)return document.mozFullScreen;console.assert(!1)};THREEx.FullScreen.request=function(a){a=a||document.body;this._hasWebkitFullScreen?a.webkitRequestFullScreen(Element.ALLOW_KEYBOARD_INPUT):this._hasMozFullScreen?a.mozRequestFullScreen():console.assert(!1)};
THREEx.FullScreen.cancel=function(){this._hasWebkitFullScreen?document.webkitCancelFullScreen():this._hasMozFullScreen?document.mozCancelFullScreen():console.assert(!1)};THREEx.FullScreen._hasWebkitFullScreen="webkitCancelFullScreen"in document?!0:!1;THREEx.FullScreen._hasMozFullScreen="mozCancelFullScreen"in document?!0:!1;
THREEx.FullScreen.bindKey=function(a){a=a||{};var d=a.charCode||102,f=void 0!==a.dblclick?a.dblclick:!1,p=a.element,m=function(){THREEx.FullScreen.activated()?THREEx.FullScreen.cancel():THREEx.FullScreen.request(p)},n=function(a){a.which===d&&m()}.bind(this);document.addEventListener("keypress",n,!1);f&&document.addEventListener("dblclick",m,!1);return{unbind:function(){document.removeEventListener("keypress",n,!1);f&&document.removeEventListener("dblclick",m,!1)}}};THREEx=THREEx||{};
THREEx.WindowResize=function(a,d){var f=function(){a.setSize(window.innerWidth,window.innerHeight);d.aspect=window.innerWidth/window.innerHeight;d.updateProjectionMatrix()};window.addEventListener("resize",f,!1);return{stop:function(){window.removeEventListener("resize",f)}}};