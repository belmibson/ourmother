Detector={canvas:!!window.CanvasRenderingContext2D,webgl:function(){try{return!!window.WebGLRenderingContext&&!!document.createElement("canvas").getContext("experimental-webgl")}catch(a){return!1}}(),workers:!!window.Worker,fileapi:window.File&&window.FileReader&&window.FileList&&window.Blob,getWebGLErrorMessage:function(){var a=document.createElement("div");a.id="webgl-error-message";a.style.fontFamily="monospace";a.style.fontSize="13px";a.style.fontWeight="normal";a.style.textAlign="center";a.style.background=
"#fff";a.style.color="#000";a.style.padding="1.5em";a.style.width="400px";a.style.margin="5em auto 0";this.webgl||(a.innerHTML=window.WebGLRenderingContext?'Your graphics card does not seem to support <a href="http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation" style="color:#000">WebGL</a>.<br />\nFind out how to get it <a href="http://get.webgl.org/" style="color:#000">here</a>.':'Your browser does not seem to support <a href="http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation" style="color:#000">WebGL</a>.<br/>\nFind out how to get it <a href="http://get.webgl.org/" style="color:#000">here</a>.');
return a},addGetWebGLMessage:function(a){var b,d;a=a||{};b=void 0!==a.parent?a.parent:document.body;a=void 0!==a.id?a.id:"oldie";d=Detector.getWebGLErrorMessage();d.id=a;b.appendChild(d)}};
THREE.OrbitControls=function(a,b){function d(){return 2*Math.PI/60/60*c.autoRotateSpeed}function g(a){f=e.ROTATE;!1!==c.enabled&&(a.preventDefault(),f===e.ROTATE?(p.set(a.clientX,a.clientY),q.subVectors(p,r),c.rotateLeft(2*Math.PI*q.x/u*c.userRotateSpeed),c.rotateUp(2*Math.PI*q.y/u*c.userRotateSpeed),r.copy(p)):f===e.ZOOM?(s.set(a.clientX,a.clientY),v.subVectors(s,t),0<v.y?c.zoomIn():c.zoomOut(),t.copy(s)):f===e.PAN&&c.pan(new THREE.Vector3(-(a.movementX||a.mozMovementX||a.webkitMovementX||0),a.movementY||
a.mozMovementY||a.webkitMovementY||0,0)))}function m(a){!1!==c.enabled&&!1!==c.userRotate&&(f=e.NONE)}function n(a){if(!1!==c.enabled&&!1!==c.userZoom){var b=0;a.wheelDelta?b=a.wheelDelta:a.detail&&(b=-a.detail);0<b?c.zoomOut():c.zoomIn()}}this.object=a;this.domElement=void 0!==b?b:document;this.enabled=!0;this.center=new THREE.Vector3;this.userZoom=!0;this.userZoomSpeed=1;this.userRotate=!0;this.userRotateSpeed=1;this.userPan=!0;this.userPanSpeed=2;this.autoRotate=!1;this.autoRotateSpeed=2;this.minPolarAngle=
0;this.maxPolarAngle=Math.PI;this.minDistance=0;this.maxDistance=Infinity;this.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40,ROTATE:65,ZOOM:83,PAN:68};var c=this,u=1800,r=new THREE.Vector2,p=new THREE.Vector2,q=new THREE.Vector2,t=new THREE.Vector2,s=new THREE.Vector2,v=new THREE.Vector2,h=0,k=0,l=1,w=new THREE.Vector3,e={NONE:-1,ROTATE:0,ZOOM:1,PAN:2},f=e.NONE,x={type:"change"};this.rotateLeft=function(a){void 0===a&&(a=d());k-=a};this.rotateRight=function(a){void 0===a&&(a=d());k+=a};this.rotateUp=function(a){void 0===
a&&(a=d());h-=a};this.rotateDown=function(a){void 0===a&&(a=d());h+=a};this.zoomIn=function(a){void 0===a&&(a=Math.pow(0.95,c.userZoomSpeed));l/=a};this.zoomOut=function(a){void 0===a&&(a=Math.pow(0.95,c.userZoomSpeed));l*=a};this.pan=function(a){a.transformDirection(this.object.matrix);a.multiplyScalar(c.userPanSpeed);this.object.position.add(a);this.center.add(a)};this.update=function(){var a=this.object.position,b=a.clone().sub(this.center),c=Math.atan2(b.x,b.z),e=Math.atan2(Math.sqrt(b.x*b.x+
b.z*b.z),b.y);this.autoRotate&&this.rotateLeft(d());var c=c+k,e=e+h,e=Math.max(this.minPolarAngle,Math.min(this.maxPolarAngle,e)),e=Math.max(1E-6,Math.min(Math.PI-1E-6,e)),f=b.length()*l,f=Math.max(this.minDistance,Math.min(this.maxDistance,f));b.x=f*Math.sin(e)*Math.sin(c);b.y=f*Math.cos(e);b.z=f*Math.sin(e)*Math.cos(c);a.copy(this.center).add(b);this.object.lookAt(this.center);h=k=0;l=1;0<w.distanceTo(this.object.position)&&(this.dispatchEvent(x),w.copy(this.object.position))};this.domElement.addEventListener("contextmenu",
function(a){a.preventDefault()},!1);this.domElement.addEventListener("mousedown",function(a){!1!==c.enabled&&!1!==c.userRotate&&(a.preventDefault(),f===e.NONE&&(0===a.button&&(f=e.ROTATE),1===a.button&&(f=e.ZOOM),2===a.button&&(f=e.PAN)),f===e.ROTATE?r.set(a.clientX,a.clientY):f===e.ZOOM&&t.set(a.clientX,a.clientY),document.addEventListener("mousemove",g,!1),document.addEventListener("mouseup",m,!1))},!1);this.domElement.addEventListener("mousewheel",n,!1);this.domElement.addEventListener("DOMMouseScroll",
n,!1);window.addEventListener("keydown",function(a){if(!1!==c.enabled&&!1!==c.userPan)switch(a.keyCode){case c.keys.ROTATE:f=e.ROTATE;break;case c.keys.ZOOM:f=e.ZOOM;break;case c.keys.PAN:f=e.PAN}},!1);window.addEventListener("keyup",function(a){switch(a.keyCode){case c.keys.ROTATE:case c.keys.ZOOM:case c.keys.PAN:f=e.NONE}},!1)};THREE.OrbitControls.prototype=Object.create(THREE.EventDispatcher.prototype);var THREEx=THREEx||{};
THREEx.KeyboardState=function(){this.keyCodes={};this.modifiers={};var a=this;this._onKeyDown=function(b){a._onKeyChange(b,!0)};this._onKeyUp=function(b){a._onKeyChange(b,!1)};document.addEventListener("keydown",this._onKeyDown,!1);document.addEventListener("keyup",this._onKeyUp,!1)};THREEx.KeyboardState.prototype.destroy=function(){document.removeEventListener("keydown",this._onKeyDown,!1);document.removeEventListener("keyup",this._onKeyUp,!1)};
THREEx.KeyboardState.MODIFIERS=["shift","ctrl","alt","meta"];THREEx.KeyboardState.ALIAS={left:37,up:38,right:39,down:40,space:32,pageup:33,pagedown:34,tab:9};THREEx.KeyboardState.prototype._onKeyChange=function(a,b){this.keyCodes[a.keyCode]=b;this.modifiers.shift=a.shiftKey;this.modifiers.ctrl=a.ctrlKey;this.modifiers.alt=a.altKey;this.modifiers.meta=a.metaKey};
THREEx.KeyboardState.prototype.pressed=function(a){a=a.split("+");for(var b=0;b<a.length;b++){var d=a[b];if(!(-1!==THREEx.KeyboardState.MODIFIERS.indexOf(d)?this.modifiers[d]:-1!=Object.keys(THREEx.KeyboardState.ALIAS).indexOf(d)?this.keyCodes[THREEx.KeyboardState.ALIAS[d]]:this.keyCodes[d.toUpperCase().charCodeAt(0)]))return!1}return!0};THREEx=THREEx||{};THREEx.FullScreen=THREEx.FullScreen||{};THREEx.FullScreen.available=function(){return this._hasWebkitFullScreen||this._hasMozFullScreen};
THREEx.FullScreen.activated=function(){if(this._hasWebkitFullScreen)return document.webkitIsFullScreen;if(this._hasMozFullScreen)return document.mozFullScreen;console.assert(!1)};THREEx.FullScreen.request=function(a){a=a||document.body;this._hasWebkitFullScreen?a.webkitRequestFullScreen(Element.ALLOW_KEYBOARD_INPUT):this._hasMozFullScreen?a.mozRequestFullScreen():console.assert(!1)};
THREEx.FullScreen.cancel=function(){this._hasWebkitFullScreen?document.webkitCancelFullScreen():this._hasMozFullScreen?document.mozCancelFullScreen():console.assert(!1)};THREEx.FullScreen._hasWebkitFullScreen="webkitCancelFullScreen"in document?!0:!1;THREEx.FullScreen._hasMozFullScreen="mozCancelFullScreen"in document?!0:!1;
THREEx.FullScreen.bindKey=function(a){a=a||{};var b=a.charCode||102,d=void 0!==a.dblclick?a.dblclick:!1,g=a.element,m=function(){THREEx.FullScreen.activated()?THREEx.FullScreen.cancel():THREEx.FullScreen.request(g)},n=function(a){a.which===b&&m()}.bind(this);document.addEventListener("keypress",n,!1);d&&document.addEventListener("dblclick",m,!1);return{unbind:function(){document.removeEventListener("keypress",n,!1);d&&document.removeEventListener("dblclick",m,!1)}}};THREEx=THREEx||{};
THREEx.WindowResize=function(a,b){var d=function(){a.setSize(window.innerWidth,window.innerHeight);b.aspect=window.innerWidth/window.innerHeight;b.updateProjectionMatrix()};window.addEventListener("resize",d,!1);return{stop:function(){window.removeEventListener("resize",d)}}};var container,scene,camera,renderer,controls,stats,keyboard=new THREEx.KeyboardState,clock=new THREE.Clock,cube;
function init(){scene=new THREE.Scene;var a=window.innerWidth,b=window.innerHeight;camera=new THREE.PerspectiveCamera(45,a/b,0.1,2E4);scene.add(camera);camera.position.set(0,100,400);camera.lookAt(scene.position);renderer=Detector.webgl?new THREE.WebGLRenderer({alpha:!0}):new THREE.CanvasRenderer;renderer.setSize(a,b);container=document.getElementById("ThreeJS");container.appendChild(renderer.domElement);THREEx.WindowResize(renderer,camera);THREEx.FullScreen.bindKey({charCode:109});controls=new THREE.OrbitControls(camera,
renderer.domElement);a=new THREE.PointLight(16777215);a.position.set(0,250,0);scene.add(a);a=new THREE.ImageUtils.loadTexture("images/sea4.png");a.wrapS=a.wrapT=THREE.RepeatWrapping;a.repeat.set(1,1);a=new THREE.MeshBasicMaterial({map:a,side:THREE.DoubleSide});b=new THREE.PlaneGeometry(300,300,10,10);a=new THREE.Mesh(b,a);a.position.y=-0.5;a.rotation.x=Math.PI/2.41;a.position.set(0,-100,10);scene.add(a);a=new THREE.ImageUtils.loadTexture("images/gold3.jpg");a.wrapS=a.wrapT=THREE.RepeatWrapping;var b=
repeatT=4,d=new THREE.ImageUtils.loadTexture("images/cloud.png");d.wrapS=d.wrapT=THREE.RepeatWrapping;var g=new THREE.ImageUtils.loadTexture("images/gold3.jpg");g.wrapS=g.wrapT=THREE.RepeatWrapping;d.wrapS=d.wrapT=THREE.RepeatWrapping;this.customUniforms={baseTexture:{type:"t",value:a},baseSpeed:{type:"f",value:0.02},repeatS:{type:"f",value:b},repeatT:{type:"f",value:repeatT},noiseTexture:{type:"t",value:d},noiseScale:{type:"f",value:0.5},blendTexture:{type:"t",value:g},blendSpeed:{type:"f",value:0.01},
blendOffset:{type:"f",value:0.25},bumpTexture:{type:"t",value:d},bumpSpeed:{type:"f",value:0.15},bumpScale:{type:"f",value:40},alpha:{type:"f",value:1},time:{type:"f",value:1}};a=new THREE.ShaderMaterial({uniforms:customUniforms,vertexShader:document.getElementById("vertexShader").textContent,fragmentShader:document.getElementById("fragmentShader").textContent});b=new THREE.SphereGeometry(50,50,50);a=new THREE.Mesh(b,a);a.position.set(0,40,0);scene.add(a)}
function animate(){requestAnimationFrame(animate);render();update()}function update(){keyboard.pressed("z");var a=clock.getDelta();customUniforms.time.value+=a;controls.update()}function render(){renderer.render(scene,camera)};